



























Bras�lia/DF - Setembro 2016
Vers�o 1.1


LEIAUTES DOS ARQUIVOS
1. Informa��es Gerais
	Este documento fornece informa��es sobre os arquivos que comp�em a Base de dados do Diret�rio Nacional de Endere�os - DNE?, nos formatos ".txt" e ".mdb"(para licenciamento master), seus leiautes e relacionamentos.
	Os campos dos arquivos est�o delimitados por um caracter separador padr�o (@). As chaves de identifica��o (Primary Key) dos registros desses arquivos est�o destacadas em vermelho.

2. Leiaute dos Arquivos
	Abaixo os leiautes de cada arquivo que comp�e a Base de Dados Comercial do Diret�rio Nacional de Endere�os - DNE?. 
2.1. LOG_FAIXA_UF.TXT - Faixa de CEP de UF
CAMPO
DESCRI��O DO CAMPO
TIPO
UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

UFE_CEP_INI
CEP inicial da UF
CHAR(8)
SEPARADOR
@

UFE_CEP_FIM
CEP final da UF
CHAR(8)
2.2. 
LOG_LOCALIDADE.TXT - Localidade
    O arquivo LOG_LOCALIDADE contempla os munic�pios, distritos e povoados do Brasil. 
   
    Os CEPs presentes neste arquivo valem para todos os logradouros da cidade, n�o necessitando consulta nos demais arquivos.

CAMPO
DESCRI��O DO CAMPO
TIPO
LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NO
nome da localidade
VARCHAR(72)
SEPARADOR
@

CEP
CEP da localidade (para  localidade  n�o codificada, ou seja loc_in_sit = 0) (opcional)
CHAR(8)
SEPARADOR
@

LOC_IN_SIT
situa��o da localidade:
0 = n�o codificada em n�vel de Logradouro,
1 = Localidade codificada em n�vel de Logradouro e
2 = Distrito ou Povoado inserido na codifica��o em n�vel de Logradouro.
CHAR(1)
SEPARADOR
@

LOC_IN_TIPO_LOC
tipo de localidade:
D - Distrito,
M - Munic�pio,
P - Povoado.


CHAR(1)


SEPARADOR
@

LOC_NU_SUB
chave da localidade de subordina��o (opcional)
NUMBER(8)
SEPARADOR
@

LOC_NO_ABREV
abreviatura do nome da localidade (opcional)
VARCHAR(36)
SEPARADOR
@

MUN_NU
C�digo do munic�pio IBGE (opcional)
CHAR(7)
2.3. LOG_VAR_LOC.TXT - Outras denomina��es da Localidade (denomina��o popular, denomina��o anterior)
CAMPO
DESCRI��O DO CAMPO
TIPO
LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

VAL_NU
ordem da denomina��o
NUMBER(8)
SEPARADOR
@

VAL_TX
Denomina��o
VARCHAR2(72)
2.4. LOG_FAIXA_LOCALIDADE.TXT - Faixa de CEP das Localidades codificadas  
    Este arquivo cont�m dados relativos �s faixas de CEP das localidades classificadas na categoria pol�tico-administrativa de munic�pio codificadas com CEP �nico ou codificadas por logradouros.

CAMPO
DESCRI��O DO CAMPO
TIPO
LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

LOC_CEP_INI
CEP inicial da localidade
CHAR(8)
SEPARADOR
@

LOC_CEP_FIM
CEP final da localidade
CHAR(8)
SEPARADOR
@

LOC_TIPO_FAIXA
tipo de Faixa de CEP:
T -Total do Munic�pio 
C - Exclusiva da  Sede Urbana
CHAR(1)

2.5. 
LOG_BAIRRO.TXT - Bairro
CAMPO
DESCRI��O DO CAMPO
TIPO
BAI_NU
chave do bairro
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

BAI_NO
nome do bairro
VARCHAR2(72)
SEPARADOR
@

BAI_NO_ABREV
abreviatura do nome do bairro (opcional)
VARCHAR2(36)

2.6. 
LOG_VAR_BAI.TXT - Outras denomina��es do Bairro Localidade (denomina��o popular, denomina��o anterior)
CAMPO
DESCRI��O DO CAMPO
TIPO
BAI_NU
chave do bairro
NUMBER(8)
SEPARADOR
@

VDB_NU
ordem da denomina��o
NUMBER(8)
SEPARADOR
@

VDB_TX
Denomina��o
VARCHAR2(72)
2.7. LOG_FAIXA_BAIRRO.TXT - Faixa de CEP de Bairro
CAMPO
DESCRI��O DO CAMPO
TIPO
BAI_NU
chave do bairro
NUMBER(8)
SEPARADOR
@

FCB_CEP_INI
CEP inicial do bairro
CHAR(8)
SEPARADOR
@

FCB_CEP_FIM
CEP final do bairro
CHAR(8)
2.8. LOG_CPC.TXT -  Caixa Postal Comunit�ria(CPC) - s�o �reas rurais e/ou urbanas perif�ricas n�o atendidas pela distribui��o domicili�ria.

CAMPO
DESCRI��O DO CAMPO
TIPO
CPC_NU
chave da caixa postal comunit�ria
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

CPC_NO
nome da CPC
VARCHAR2(72)
SEPARADOR
@

CPC_ENDERECO
endere�o da CPC
VARCHAR2(100)
SEPARADOR
@

CEP
CEP da CPC
CHAR(8)
2.9. LOG_FAIXA_CPC.TXT - Faixa de Caixa Postal Comunit�ria
CAMPO
DESCRI��O DO CAMPO
TIPO
CPC_NU
chave da caixa postal comunit�ria
NUMBER(8)
SEPARADOR
@

CPC_INICIAL
n�mero inicial da caixa postal comunit�ria
VARCHAR2(6)
SEPARADOR
@

CPC_FINAL
n�mero final da caixa postal comunit�ria
VARCHAR2(6)

2.10. 
LOG_LOGRADOURO_XX.TXT - Logradouro, onde XX representa a sigla da UF. 
	Este arquivo cont�m os registros das localidades codificadas por  logradouro(LOC_IN_SIT=1). Para encontrar o bairro do logradouro, utilize o campo BAI_NU_INI(relacionamento com LOG_BAIRRO, campo BAI_NU) --> o bairro final, campo BAI_NU_FIM, est� sendo desativado.
 
CAMPO
DESCRI��O DO CAMPO
TIPO
LOG_NU
chave do logradouro
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

BAI_NU_INI
chave do bairro inicial do logradouro 
NUMBER(8)
SEPARADOR
@

BAI_NU_FIM
chave do bairro final do logradouro (opcional)
NUMBER(8)
SEPARADOR
@

LOG_NO
nome do logradouro
VARCHAR2(100)
SEPARADOR
@

LOG_COMPLEMENTO
complemento do logradouro (opcional)
VARCHAR2(100)
SEPARADOR
@

CEP
CEP do logradouro
CHAR(8)
SEPARADOR
@

TLO_TX
tipo de logradouro
VARCHAR2(36)
SEPARADOR
@

LOG_STA_TLO
indicador de utiliza��o do tipo de logradouro (S ou N) (opcional)
CHAR(1)
SEPARADOR
@

LOG_NO_ABREV
abreviatura do nome do logradouro (opcional)
VARCHAR2(36)

2.11. 
LOG_VAR_LOG.TXT - Outras denomina��es do logradouro(denomina��o popular, denomina��o anterior)
CAMPO
DESCRI��O DO CAMPO
TIPO
LOG_NU
chave do logradouro
NUMBER(8)
SEPARADOR
@

VLO_NU
ordem da denomina��o
NUMBER(8)
SEPARADOR
@

TLO_TX
tipo de logradouro da varia��o
VARCHAR2(36)
SEPARADOR
@

VLO_TX
nome da varia��o do logradouro
VARCHAR2(150)
2.12. LOG_NUM_SEC.TXT - Faixa num�rica do seccionamento
CAMPO
DESCRI��O DO CAMPO
TIPO
LOG_NU
chave do logradouro
NUMBER(8)
SEPARADOR
@

SEC_NU_INI
n�mero inicial do seccionamento
VARCHAR2(10)
SEPARADOR
@

SEC_NU_FIM
n�mero final do seccionamento
VARCHAR2(10)
SEPARADOR
@

SEC_IN_LADO
Indica a paridade/lado do seccionamento
A - ambos,
P - par,
I - �mpar,
D - direito e
E - esquerdo.
CHAR(1)






2.13. 
LOG_GRANDE_USUARIO.TXT - Grande Usu�rio 
		S�o clientes com grande volume postal (empresas, universidades, bancos,  �rg�os p�blicos, etc), O campo LOG_NU est� sem conte�do para as localidades n�o codificadas(LOC_IN_SIT=0), devendo ser utilizado o campo GRU_ENDERE�O para  endere�amento.

CAMPO
DESCRI��O DO CAMPO
TIPO
GRU_NU
chave do grande usu�rio
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

BAI_NU
chave do bairro
NUMBER(8)
SEPARADOR
@

LOG_NU
chave do logradouro (opcional)
NUMBER(8)
SEPARADOR
@

GRU_NO
nome do grande usu�rio
VARCHAR2(72)
SEPARADOR
@

GRU_ENDERECO
endere�o do grande usu�rio
VARCHAR2(100)
SEPARADOR
@

CEP
CEP do grande usu�rio
CHAR(8)
SEPARADOR
@

GRU_NO_ABREV
abreviatura do nome do grande usu�rio (opcional) 
VARCHAR2(36)

2.14. 
LOG_UNID_OPER.TXT - Unidade Operacional dos Correios. 
	S�o ag�ncias pr�prias ou terceirizadas, centros de distribui��o, etc. O campo LOG_NU est� sem conte�do para as localidades n�o codificadas(LOC_IN_SIT=0), devendo ser utilizado o campo UOP_ENDERE�O para endere�amento.

CAMPO
DESCRI��O DO CAMPO
TIPO
UOP_NU
chave da UOP
NUMBER(8)
SEPARADOR
@

UFE_SG
sigla da UF
CHAR(2)
SEPARADOR
@

LOC_NU
chave da localidade
NUMBER(8)
SEPARADOR
@

BAI_NU
chave do bairro
NUMBER(8)
SEPARADOR
@

LOG_NU
chave do logradouro (opcional)
NUMBER(8)
SEPARADOR
@

UOP_NO
nome da UOP
VARCHAR2(100)
SEPARADOR
@

UOP_ENDERECO
endere�o da UOP
VARCHAR2(100)
SEPARADOR
@

CEP
CEP da UOP
CHAR(8)
SEPARADOR
@

UOP_IN_CP
indicador de caixa postal (S ou N)
CHAR(1)
SEPARADOR
@

UOP_NO_ABREV
abreviatura do nome da unid. operacional (opcional) 
VARCHAR2(36)





2.15. LOG_FAIXA_UOP.TXT - Faixa de Caixa Postal - UOP
CAMPO
DESCRI��O DO CAMPO
TIPO
UOP_NU
chave da UOP
NUMBER(8)
SEPARADOR
@

FNC_INICIAL
n�mero inicial da caixa postal 
NUMBER(8)
SEPARADOR
@

FNC_FINAL
n�mero final da caixa postal
NUMBER(8)
2.16. ECT_PAIS.TXT - Rela��o dos Nomes dos Pa�ses, suas siglas e grafias em ingl�s e franc�s(*). 
CAMPO
DESCRI��O DO CAMPO
TIPO
PAI_SG
Sigla do Pa�s
CHAR(2)
SEPARADOR
@

PAI_SG_ALTERNATIVA
n�mero inicial da caixa postal 
CHAR(3)
SEPARADOR
@

PAI_NO_PORTUGUES
n�mero final da caixa postal
CHAR(72)
SEPARADOR
@

PAI_NO_INGLES
n�mero inicial da caixa postal 
CHAR(72)
SEPARADOR
@

PAI_NO_FRANCES
n�mero final da caixa postal
CHAR(72)
SEPARADOR
@

PAI_ABREVIATURA
n�mero final da caixa postal
CHAR(36)
(*) A tabela ECT_PAIS n�o consta no item 3 - Diagrama de Relacionamento por n�o ter relacionamentos com outra tabela.
3. 
Diagrama de Relacionamento




4. Como utilizar o DNE para validar o CEP

      Normalmente os usu�rios do DNE querem implantar uma rotina para valida��o do CEP que recupere automaticamente os dados de endere�o de seus clientes. Os clientes da modalidade master poder�o simplificar os procedimentos descrito abaixo, gerando  uma nova tabela atrav�s da consulta CONCATENA_CEPs dispon�vel no MDB.
   
   Para montar essa rotina iremos utilizar os seguintes arquivos do DNE:
   
* LOG_LOCALIDADE;
* LOG_LOGRADOURO;
* LOG_GRANDE_USUARIO;
* LOG_UNID_OPER;
* LOG_CPC;

Ap�s o usu�rio informar o CEP, deve ser adotado os seguintes procedimentos:

1. Verificar se o CEP existe na tabela LOG_LOCALIDADE.

2. Se o CEP for encontrado, ser� retornado a UF(UFE_SG) e o nome da Localidade(LOC_NO). As demais informa��es(Logradouro, Bairro e Complemento) dever�o ser solicitadas ao  usu�rio. N�o ser� necess�rio pesquisar outras tabelas, pois trata-se de um CEP de uma localidade n�o codificada por logradouro -  CEP gen�rico.

3. Se o CEP n�o foi encontrado, verificar se o CEP existe na tabela LOG_LOGRADOURO;

4. Se o CEP for encontrado ser� retornado a UF(UFE_SG) o nome da Localidade(LOC_NO --> relacionamento com LOG_LOCALIDADE), Tipo de Logradouro (TLO_TX), Logradouro( LOG_NO), Dados Adicionais(LOG_COMPLEMENTO), Bairro(BAI_NU_INI --> relacionamento com a tabela LOG_BAIRRO, campo BAI_NU). O Complemento (n� casa, lote, apartamento, etc)  dever� ser solicitada ao usu�rio. 

5. Se o CEP n�o foi encontrado, verificar se o CEP existe na tabela LOG_GRANDE_USUARIO;

6. Se o CEP for encontrado ser� retornado a UF(UFE_SG) o nome da Localidade(LOC_NO --> relacionamento com LOG_LOCALIDADE), Endere�o( GRU_ENDERECO), Nome do Grande Usu�rio(GRU_NO), Bairro(BAI_NU --> relacionamento com a tabela LOG_BAIRRO, campo BAI_NU).

7. Se o CEP n�o foi encontrado, verificar se o CEP existe na tabela LOG_UNID_OPER;

8. Se o CEP for encontrado ser� retornado a UF(UFE_SG) o nome da Localidade(LOC_NO --> relacionamento com LOG_LOCALIDADE), Endere�o( UOP_ENDERECO), Nome da Unidade dos Correios(UOP_NO), Bairro(BAI_NU --> relacionamento com a tabela LOG_BAIRRO, campo BAI_NU);

9. Se o CEP n�o foi encontrado, verificar se o CEP existe na tabela LOG_CPC;

10. Se o CEP for encontrado ser� retornado a UF(UFE_SG) o nome da Localidade(LOC_NO --> relacionamento com LOG_LOCALIDADE), Endere�o( CPC_ENDERECO), Nome da CPC(CPC_NO).

11. Se o CEP n�o foi encontrado, retornar mensagem de CEP INEXISTENTE.

5. 
Consulta CONCATENA_CEPs - MDB

select log_logradouro.ufe_sg,  log_localidade.loc_no,  log_bairro.bai_no, log_logradouro.tlo_tx+" " + log_logradouro.log_no as log_no, log_logradouro.cep,  log_logradouro.log_complemento,"" as nome
       from log_logradouro, log_localidade, log_bairro
where log_logradouro.loc_nu= log_localidade.loc_nu  and log_logradouro.bai_nu_ini=log_bairro.bai_nu and log_logradouro.log_sta_tlo ="s"
       union
select log_logradouro.ufe_sg, log_localidade.loc_no,  log_bairro.bai_no,  log_logradouro.log_no as log_no, log_logradouro.cep,  log_logradouro.log_complemento,"" as nome
       from log_logradouro, log_localidade, log_bairro
where log_logradouro.loc_nu= log_localidade.loc_nu  and log_logradouro.bai_nu_ini=log_bairro.bai_nu  and log_logradouro.log_sta_tlo ="n"
       union 
SELECT LOC.UFE_SG, LOC.LOC_NO AS LOC_NO, "" AS BAI_NO, "" AS LOG_NO, LOC.CEP, "" AS LOG_COMPLEMENTO, "" AS NOME
FROM LOG_LOCALIDADE AS LOC
WHERE LOC.CEP IS NOT NULL
AND   LOC.LOC_NU_SUB IS NULL
UNION 
SELECT LOC.UFE_SG, LOCSUB.LOC_NO AS LOC_NO, LOC.LOC_NO AS BAI_NO, "" AS LOG_NO, LOC.CEP, "" AS LOG_COMPLEMENTO, "" AS NOME
FROM LOG_LOCALIDADE AS LOC, LOG_LOCALIDADE AS LOCSUB
WHERE LOC.CEP IS NOT NULL
AND   LOC.LOC_NU_SUB IS NOT NULL
AND   LOC.LOC_NU_SUB= LOCSUB.LOC_NU
union 
select log_cpc.ufe_sg, log_localidade.loc_no,"" as  bai_no, log_cpc.cpc_endereco as log_no, log_cpc.cep,"" as log_complemento,cpc_no as nome
       from log_cpc,  log_localidade
       where  log_cpc.loc_nu=log_localidade.loc_nu
union
select  log_grande_usuario.ufe_sg, log_localidade.loc_no, log_bairro.bai_no as  bai_no,  log_grande_usuario.gru_endereco as log_no,  log_grande_usuario.cep,"" as log_complemento,gru_no as nome
       from log_grande_usuario,  log_localidade, log_bairro
where  log_grande_usuario.loc_nu=log_localidade.loc_nu and  log_grande_usuario.bai_nu = log_bairro.bai_nu
union
select  log_unid_oper.ufe_sg, log_localidade.loc_no, log_bairro.bai_no as  bai_no,  log_unid_oper.uop_endereco as log_no, log_unid_oper.cep,"" as log_complemento, uop_no as nome
       from log_unid_oper,  log_localidade, log_bairro
where  log_unid_oper.loc_nu=log_localidade.loc_nu and  log_unid_oper.bai_nu = log_bairro.bai_nu;
     
     * * * * *

EMPRESA BRASILEIRA DE CORREIOS E TEL�GRAFOS
DNE??- Leiautes




Leiautes_TE.doc
Data: 19/04/25
Pag: 1/1


